syntax = "proto3";
package nocloud.instances;

option go_package = "github.com/slntopp/nocloud/pkg/instances/proto";

import "google/protobuf/struct.proto";

message Instance {
    string title = 1;
    map<string, google.protobuf.Value> config = 2;
    map<string, google.protobuf.Value> resources = 3;
    map<string, google.protobuf.Value> data = 4;
}

message InstancesGroup {
    string type = 1;
    map<string, google.protobuf.Value> config = 2;
    repeated Instance instances = 3;
    map<string, google.protobuf.Value> resources = 4;
    map<string, google.protobuf.Value> data = 5;
}

message ValidateInstancesGroupConfigRequest {
    InstancesGroup config = 1;
}

message ValidateInstancesGroupConfigError {
    string error = 1;
    string instance = 2;
}

message ValidateInstancesGroupConfigResponse {
    bool result = 1;
    repeated ValidateInstancesGroupConfigError errors = 2;
}